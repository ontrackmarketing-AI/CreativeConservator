---
export interface Props {
  eyebrow?: string;
  title: string;
  lead?: string;
  image: string;
  imageAlt: string;
  primaryCta?: {
    text: string;
    href: string;
  };
  secondaryCta?: {
    text: string;
    href: string;
  };
  reversed?: boolean;
}

const {
  eyebrow,
  title,
  lead,
  image,
  imageAlt,
  primaryCta,
  secondaryCta,
  reversed = false,
} = Astro.props;
---

<section class:list={['hero-split', { 'hero-split--reversed': reversed }]}>
  <div class="hero-split-content" data-reveal="fade-up">
    {eyebrow && <p class="eyebrow">{eyebrow}</p>}
    <h1 class="display" data-reveal="split-lines">{title}</h1>
    {lead && <p class="lead mt-lg">{lead}</p>}
    {(primaryCta || secondaryCta) && (
      <div class="hero-ctas mt-xl" data-reveal="stagger-up">
        {primaryCta && (
          <a href={primaryCta.href} class="btn btn-primary" data-transition-link>
            {primaryCta.text}
          </a>
        )}
        {secondaryCta && (
          <a href={secondaryCta.href} class="btn btn-secondary" data-transition-link>
            {secondaryCta.text}
          </a>
        )}
      </div>
    )}
  </div>
  <div class="hero-split-image" data-reveal="clip-up">
    <picture>
      <source
        type="image/webp"
        srcset={`${image.replace('-1920.jpg', '-400.webp')} 400w, ${image.replace('-1920.jpg', '-800.webp')} 800w, ${image.replace('-1920.jpg', '-1200.webp')} 1200w, ${image.replace('.jpg', '.webp')} 1920w`}
        sizes="(max-width: 768px) 100vw, 50vw"
      />
      <img
        src={image.replace('-1920.jpg', '-800.jpg')}
        srcset={`${image.replace('-1920.jpg', '-400.jpg')} 400w, ${image.replace('-1920.jpg', '-800.jpg')} 800w, ${image.replace('-1920.jpg', '-1200.jpg')} 1200w, ${image} 1920w`}
        sizes="(max-width: 768px) 100vw, 50vw"
        alt={imageAlt}
        width="800"
        height="1200"
        loading="eager"
        decoding="async"
        data-parallax="-15"
        fetchpriority="high"
      />
    </picture>
  </div>
</section>

<style>
  .hero-split--reversed {
    direction: rtl;
  }

  .hero-split--reversed > * {
    direction: ltr;
  }

  .hero-split--reversed {
    grid-template-columns: 45% 55%;
  }

  .hero-ctas {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
  }

  @media (max-width: 1024px) {
    .hero-split--reversed {
      grid-template-columns: 1fr;
    }

    .hero-ctas {
      justify-content: center;
    }
  }
</style>

---
import type { Package } from '../data/pricing';
import { formatPrice } from '../data/pricing';

export interface Props {
  package: Package;
}

const { package: pkg } = Astro.props;
const priceDisplay = formatPrice(pkg.price.min, pkg.price.max);
---

<div class:list={['pricing-card', { 'is-popular': pkg.isPopular }]}>
  {pkg.isPopular && (
    <div class="pricing-badge">Most Popular</div>
  )}

  <div class="pricing-card-header">
    <span class="pricing-tier-label">{pkg.tagline}</span>
    <h3 class="pricing-tier-name">{pkg.name}</h3>
    <p class="pricing-target">{pkg.target}</p>
  </div>

  <div class="pricing-price-block">
    <span class="pricing-price">{priceDisplay}</span>
    <span class="pricing-suffix">{pkg.price.suffix}</span>
    {pkg.price.note && <span class="pricing-note">{pkg.price.note}</span>}
  </div>

  <div class="pricing-divider"></div>

  <div class="pricing-services">
    <h4 class="pricing-section-title">What's Included</h4>
    <ul class="pricing-list">
      {pkg.services.map((service) => (
        <li class="pricing-list-item">
          <svg class="pricing-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          <div>
            <span class="pricing-service-name">{service.name}</span>
            {service.description && (
              <span class="pricing-service-desc">{service.description}</span>
            )}
          </div>
        </li>
      ))}
    </ul>
  </div>

  <div class="pricing-deliverables">
    <h4 class="pricing-section-title">Deliverables</h4>
    <ul class="pricing-deliverables-list">
      {pkg.deliverables.map((deliverable) => (
        <li>{deliverable}</li>
      ))}
    </ul>
  </div>

  <div class="pricing-meta">
    {pkg.timeline && (
      <div class="pricing-meta-item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <span>Timeline: {pkg.timeline}</span>
      </div>
    )}
    {pkg.commitment && (
      <div class="pricing-meta-item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <span>Commitment: {pkg.commitment}</span>
      </div>
    )}
  </div>

  <a href={pkg.ctaHref} class:list={['btn', pkg.isPopular ? 'btn-primary' : 'btn-secondary', 'pricing-cta']}>
    {pkg.ctaText}
  </a>
</div>
